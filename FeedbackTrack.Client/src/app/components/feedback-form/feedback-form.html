<div class="container" style="max-width: 600px; margin-top: 40px;">
    <div class="card">
        <h2>Give Feedback</h2>

        <div *ngIf="successMessage" class="btn-success" style="margin-bottom: 15px; text-align: center;">
            {{ successMessage }}
        </div>
        <div *ngIf="errorMessage" class="btn-danger" style="margin-bottom: 15px; text-align: center;">
            {{ errorMessage }}
        </div>

        <form (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="recipient">Recipient</label>
                <select id="recipient" [(ngModel)]="feedback.toUserId" name="toUserId" class="form-control" required
                    style="width: 100%; padding: 10px;">
                    <option [ngValue]="null" disabled>Select a colleague...</option>
                    <option *ngFor="let user of users" [value]="user.id">
                        {{ user.name }} ({{ user.department?.departmentName || 'Unknown Dept' }})
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="description">Feedback</label>
                <textarea id="description" [(ngModel)]="feedback.description" name="description" rows="5"
                    class="form-control" required placeholder="Share your constructive feedback..."
                    style="width: 100%; padding: 10px;"></textarea>
            </div>

            <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" id="anon" [(ngModel)]="feedback.isAnonymous" name="isAnonymous">
                <label for="anon" style="margin-bottom: 0;">Submit Anonymously</label>
            </div>

            <button type="submit" class="btn btn-primary"
                [disabled]="isLoading || !feedback.toUserId || !feedback.description">
                {{ isLoading ? 'Submitting...' : 'Submit Feedback' }}
            </button>
            <button type="button" class="btn btn-danger" style="margin-left: 10px;" (click)="loadUsers()">Reload
                Users</button>
        </form>
    </div>
</div>